<script>
    $(document).on('click', '.button', function(){
      var date = document.getElementById("user_record_date").value;
      var start = document.getElementById("user_record_start_time").value;
      var end = document.getElementById("user_record_end_time").value;
      var status = false;
      if(date.length<1){
          document.getElementById("datepick").innerHTML = "Please select the Date.";
      }
      else{
          
          status = true;
      }
      if(start.length<1){
          document.getElementById("startpick").innerHTML = "Please enter the Start Time.";
          status = false;
      }
      else{
        status = true;
      }
      if(end.length<1){
          document.getElementById("endpick").innerHTML = "Please enter the End Time.";
          status = false;
      }
      else{
        status = true;
      }
    return status;
    });
    
    
    $(document).on('click', '#user_record_client_name', function(){
        var client_nm = $(this).val();
        document.getElementById("empty_project").innerHTML = "";
        $.get('/user_records/dropdown', {client_name: client_nm}, function(data){
            $("#user_record_project_name").html("");
            $.each(data, function(index, value){
              $("#user_record_project_name").append( "<option value='" + data[index][1] + "'>" + data[index][1] + "</option>" );
            });
          
        });
    });

    $(document).on('click', '#user_record_project_name', function(){
      if ( $('#user_record_project_name').children().length == 0 ){
        document.getElementById("empty_project").innerHTML = "Please select Client first.";
      }
    });
</script>
<%= render "devise/shared/error_messages", resource:  @user_record %>
<div style="margin-left: 60px;">
    <h2>Update Timesheet Entry</h2>
    <br>
    <div style="width:800px;">
        <%= form_with model: @user_record, local: true do |form| %>
          <p>
            <%= form.label :client_name %><br>
            <%= form.collection_select(:client_name, Client.all, :client_name,:client_name) %>
          </p>
          <br>
          <p>
            <%= form.label :project_name %><br>
            <%= form.select(:project_name, []) %>
            <span id="empty_project" style="color:red">
          </p>
          <br>
          <p>
            <%= form.label :activity_type %><br>
            <%= form.select(:activity_type, UserRecord::ACTIVITY_TYPES) %>
          </p>
          <br>
          <p>
            <%= form.label :date %><br>
            <%= form.text_field :date, placeholder: 'DD-MM-YYYY', class: 'flatpikrcal', readonly: true %>
            <span id="datepick" style="color:red"></span>
          </p>
          <br>
          <p>
            <%= form.label :start_time %><br>
            <%= form.text_field :start_time, placeholder: 'HH:MM AM/PM', class: 'flatpickrstart flatpickr-input active', readonly: true %>
            <span id="startpick" style="color:red"></span>
          </p>
          <br>
          <p>
            <%= form.label :end_time %><br>
            <%= form.text_field :end_time, placeholder: 'HH:MM AM/PM', class: 'flatpickrend flatpickr-input active', readonly: true %>
            <span id="endpick" style="color:red"></span>
          </p>
          <br>
          <p>
            <%= form.label :description %><br>
            <%= form.text_area :description, :required => 'required' %>
          </p>
          <br>
          <p>
            <%= form.submit :class => 'button' %>
          </p>
          <br>
        <% end %>
    </div>
</div>